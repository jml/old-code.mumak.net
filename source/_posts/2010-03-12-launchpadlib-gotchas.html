---
layout: post
title: "launchpadlib gotchas"
date: 2010-03-12
comments: false
---

<div class='post'>
I've shown you how to <a href="http://code.mumak.net/2010/03/get-started-with-launchpadlib.html">get started with launchpadlib</a> and have shown a <a href="http://code.mumak.net/2010/03/launchpadlib-powerup.html">slightly more complex launchpadlib script</a>.<br /><br />Before I cry <q>The power is yours!</q> and return to my home within the earth, I'm going to warn you about the things that can trip you up when using launchpadlib.<br /><h3>Bugs</h3><a href="https://bugs.launchpad.net/launchpadlib/">launchpadlib</a> has bugs. There are also bugs in <a href="https://bugs.launchpad.net/lazr.restful">lazr.restful</a> and <a href="https://bugs.launchpad.net/lazr.restfulclient">lazr.restfulclient</a> – two libraries that are core to launchpadlib's behaviour.<div><br /></div><div>Welcome to software engineering.<br /><h3>Documentation</h3>It's <a href="https://help.launchpad.net/API">on the wiki</a>, and it's good, but it could always be better. There's a page of <a href="https://help.launchpad.net/API/Examples"> as well as a </a><a href="https://help.launchpad.net/API/launchpadlib">guide on launchpadlib</a>.<br /><br />The <a href="https://launchpad.net/+apidoc/">reference documentation</a> isn't written for Python programmers. It's written for REST programmers. Actually, it's not written at all but rather auto-generated from our source code. Sometimes this can be  confusing, and I frequently find myself consulting the <a href="http://bazaar.launchpad.net/~launchpad-pqm/launchpad/db-devel/files">Launchpad source code</a> to get things done with the API.<br /><h3>Error messages</h3>I'm told this has got better with recent releases, but often when you get an error in launchpadlib, it looks like an HTTP error and you have very little help on how to  debug it. Unfortunately, I don't have an example ready.<br /><br />If you come across an error like this, file a bug and head straight to #launchpad-dev on freenode to get help.<br /><h3>Potato programming</h3>It's really easy to write code with launchpadlib that does this:<pre>  for thing in bunch_of_things:<br />    thing.do_something_on_launchpad()<br /></pre>Code like this is really slow. It will do one round-trip per <q>thing</q>, which can be quite expensive. Twisted folks sometimes call this <q><a href="http://divmod.org/trac/wiki/PotatoProgramming">potato programming</a></q>.<br /><h3>Exposure</h3>Not all of the code within Launchpad is exposed through the API. We have to expose things manually and we haven't done it all yet. Sorry.<br /><br />If you come across something that you want, then please <a href="https://bugs.launchpad.net/launchpad/+filebug">file a bug</a> and tag it with <q>api</q>.<br /><br />In general, exposing something of the API is really easy or almost impossible. If the thing you want falls into the first category, you can probably patch Launchpad yourself.<br /><h3>Testing</h3>Testing launchpadlib apps is hard. You do not want your unit tests to run against launchpad.net and running your own instance of Launchpad simply to run unit tests is masochistically stupid.<br /><br />I think the situation here has improved recently too, but I haven't heard much about it or explored it myself.<br /><h3>Conclusion</h3>There you have it, all of the gotchas for writing code with launchpadlib. As you can see, it's not really any worse than writing for any Python library – I'm just being up-front with you because I like you.<br /><br />If any of these gotchas no longer apply, please correct me and I will shout your good news from the rooftops.<br /><br />Until then, happy hacking.<br /></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>mbp</div>
<div class='content'>
What a nice post.<br /><br />What should one do to avoid potato programming?<br /><br />The best option for testing seems to be to run your app against staging, which is a real Launchpad instance with a separate expendable database where you can change whatever you like.<br /><br />It&#39;s worth knowing about  James&#39;s tip in :<br /><br />httplib2.debuglevel = 1<br /><br />which will show you a bit of what&#39;s happening on the network.</div>
</div>
</div>
