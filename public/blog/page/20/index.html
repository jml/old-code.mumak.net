
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mere Code</title>
  <meta name="author" content="Jonathan Lange">

  
  <meta name="description" content="I&#8217;m currently hacking away on Launchpad&#8217;s support for &#8221;stacked branches&#8221;, something that will really make Launchpad&#8217;s &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://code.mumak.net/blog/page/20/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Mere Code" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">(</div>
  	<div id="logoText">jml</div>
  	<div id="logoRight">)</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Mere Code</a></h1>
  
    <h2>Diverse Topics of General Interest to the Practicing Programmer</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:code.mumak.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About this blog</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/06/another-bazaar-story.html">Another Bazaar story</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-06-13T00:00:00+01:00" pubdate data-updated="true">2008-06-13 Friday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;m currently hacking away on Launchpad&#8217;s support for &#8221;<a href="http://jam-bazaar.blogspot.com/2008/05/this-week-in-bazaar_29.html">stacked branches</a>&#8221;, something that will really make Launchpad&#8217;s codehosting a joy to use.<br /><br />At the moment, I&#8217;m writing some tests that require a user to login. This was becoming a bit cumbersome, until I remembered something: Tim has recently landed some code to make this easy. But how do I get these changes without messing up all of the work I&#8217;m doing now? bzr shelve to the rescue!<br /><br />&#8216;shelve&#8217; interactively goes through each change you&#8217;ve made to your current working tree and allows you to decide whether to keep a change or shelve it. It comes with a twin command &#8216;unshelve&#8217;, which lets you interactively restore your changes.<br /><br />In this case, I don&#8217;t even care about the interactivity, so here&#8217;s what I did:<br /><pre><br /># Shelve my changes<br />bzr shelve --all<br /># Fetch the latest trunk<br />cd ../trunk<br />bzr pull<br /># Merge it into my branch<br />cd ../stacking<br />bzr merge ../trunk<br />bzr ci -m "Merge in changes from trunk to get login testing improvements."<br /># Restore my changes<br />bzr unshelve --all</pre><br /><br />The &#8216;shelve&#8217; command comes with the <a href="http://launchpad.net/bzrtools">bzrtools</a> plugin, and I am basically in love with it.<br /><br />As a parting shot, I should mention that things like bzrtools aren&#8217;t accidents. They are natural and inevitable when you have <a href="http://starship.python.net/crew/mwh/bzrlibapi/bzrlib.html">good APIs</a> in a <a href="http://python.org">high-level language</a> and a <a href="http://bazaar-vcs.org/WritingPlugins">very nice plugin system</a>.<br /><br />And now I&#8217;m off to keep working on this branch.<br /><br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/06/real-life.html">Real Life</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-06-05T00:00:00+01:00" pubdate data-updated="true">2008-06-05 Thursday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Inspired by <a href="http://mikeylynch.blogspot.com">Mikey</a>, I&#8217;ve set up my own <a href="http://life.mumak.net">real-life blog</a>.<br /><br />I&#8217;ve done this one using Blogger&#8217;s &#8220;upload to remote server&#8221; feature. It looks nice, has the features I need and means less WordPress &amp; PHP. I&#8217;m hoping to migrate this sucker to the same technology.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/06/neat-bazaar-feature_9205.html">Neat Bazaar feature</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-06-02T00:00:00+01:00" pubdate data-updated="true">2008-06-02 Monday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Ever find yourself working away on a branch, enjoying yourself and getting just a little carried away? Maybe you&#8217;re working on a feature and you notice and fix a bug that&#8217;s not strictly related to that feature.<br /><br />If you catch yourself in time, there&#8217;s a nice little feature in Bazaar that can help with this: <code>bzr merge --uncommitted</code>. It will merge in the changes that you&#8217;ve made to your working tree but haven&#8217;t committed yet.<br /><br />e.g.<br /><pre><br />$ cd some-feature-branch<br /><br />... hack hack hack ... oops!<br /><br />$ cd ..<br /><br />$ bzr branch trunk bug-fix-2357<br /><br />$ cd bug-fix-2357<br /><br />$ bzr merge --uncommitted ../some-feature-branch<br /><br />$ bzr ci -m "Fix up bug 2357. Found this while working on some-feature."<br /><br />$ bzr send</pre><br /><br />Don&#8217;t know what <code>bzr send</code> does? Trust me, you want to find out.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/04/what-i-meant_20.html">What I meant</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-04-21T00:00:00+01:00" pubdate data-updated="true">2008-04-21 Monday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a href="http://z3p.tumblr.com/">z3p</a> recently <a href="http://z3p.tumblr.com/post/32324725">blogged about</a> a comment I made in <a href="http://twistedmatrix.com/trac/ticket/2710">a code review</a>. In the review, I linked to:<br /><br /><img src="http://74.54.212.169/2ERcULhJC81alpg64P4WN7Of_400.jpg" alt="The only measure of code quality is WTFs / minute" /><br /><br />That&#8217;s a negative and grumpy way of phrasing an idea that I&#8217;ve come to value a lot: <em>good code expresses its intent clearly.</em><br /><br />When looking at a patch, the reviewer needs to understand two things: the intent of the code and the intent of each <em>change</em> to the code. To be clear on the former, you need:<br /><ul><br />	<li>intent-revealing names.</li><br />	<li>good abstractions / interfaces.</li><br />	<li>good, small tests.</li><br />	<li>simple implementations where possible.[1]</li><br />	<li>docstrings where appropriate</li><br />	<li>comments where appropriate.</li><br /></ul><br />That&#8217;s not exhaustive, but it&#8217;s in a rough order.<br /><br />To be clear on the intent of your change to code, you need:<br /><ul><br />	<li>Small patches.</li><br />	<li>A good bug / spec with a good, short summary.</li><br />	<li>A review request letter, summarizing your implementation strategy, any compromises you made, gaps in testing, future work etc.</li><br /></ul><br />That&#8217;s not exhaustive either. In #2037, I didn&#8217;t understand the motivation for lots of the code, nor for some of the changes to the code.<br /><br />I&#8217;m indebted to <a href="http://andrew.puzzling.org">Andrew Bennetts</a> for teaching me that the first duty of a reviewer is to ensure that the code is clear and to <a href="http://intellectronica.net/">Tom Berger</a> for reminding me that compromises are worth noting.<br /><br />&#8212;-<br /><br />[1] Actually, this reminds me of something I heard <a href="http://en.wikipedia.org/wiki/Don_Carson">a preacher</a> say, &#8220;before I give a sermon, I go through it, find everything clever, and take it out&#8221; (I paraphrase, not having a reference on hand).<br /><br />In as much as sermons and code should both be ego-free communications of ideas, I think this is sound advice for hackers.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/04/bzr-removable_20.html">bzr-removable</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-04-21T00:00:00+01:00" pubdate data-updated="true">2008-04-21 Monday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The plugin I talked about in a previous post is now at https://launchpad.net/bzr-removable. Please file bugs.<br /><br />Thanks to Michael Hudson and Daniel Watkins for submitting patches.<br /><br />You can get the plugin by typing &#8216;bzr branch lp:bzr-removable&#8217; on the command line.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2009-01-28 11:51</span></div>
<div class='content'>
The &#8220;Mary says&#8221; thing was a comment typed into the wrong field. Sorry again.</div>
</div>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2009-01-28 11:51</span></div>
<div class='content'>
Sure, I&#8217;m not laying down a fundamental law of physics here &#8211; I&#8217;m describing my own personal motivation.<BR/><BR/>I&#8217;m sorry that your whole experience of this plugin has been terrible, and I&#8217;m glad you&#8217;ve gone to the trouble of posting here so that other googlers can find the docs you&#8217;ve written.<BR/><BR/>As this is obviously the first user feedback I&#8217;ve received, I would have liked to hear something nice, but perhaps there was nothing nice to say. <BR/><BR/>Mary says https://bugs.edge.launchpad.net/bzr-removable/+bug/322262</div>
</div>
<div class='comment'>
<div class='author'>Mary<span class='comment-date'> on 2009-01-28 05:48</span></div>
<div class='content'>
Cause and effect on &#8220;bad documentation, unused software&#8221; is not always &#8220;unusued software leads to no motivation for documentation&#8221;. I&#8217;d tend to argue the other way around, in fact.</div>
</div>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2009-01-27 11:32</span></div>
<div class='content'>
Thanks for the interest guys. I agree that the software is not well documented, but you are the first users I&#8217;ve heard from in the last eight months, I think the documentation is economical.<BR/><BR/>Can you please file bugs on the project on Launchpad?</div>
</div>
<div class='comment'>
<div class='author'>Mary<span class='comment-date'> on 2009-01-27 01:12</span></div>
<div class='content'>
Fuller and more prominent documentation would be appreciated (in general my rule of thumb is that if I&#8217;ve had to go to a core developer of a piece of software for assistance, it&#8217;s not well documented!)<BR/><BR/>The full sequence of install steps for this (on UNIX filesystems) is actually:<BR/><BR/>$ cd [some directory where one normally stores code]<BR/>$ bzr branch lp:bzr-removable<BR/>$ mkdir -p ~/.bazaar/plugins<BR/>$ cd ~/.bazaar/plugins<BR/>$ ln -s [some directory]/bzr-removable/removeable<BR/><BR/>Then &#8220;bzr plugins&#8221; will verify the install and finally the actual commands one needs are &#8220;bzr removable&#8221; and &#8220;bzr unremovable&#8221;</div>
</div>
<div class='comment'>
<div class='author'>spiv<span class='comment-date'> on 2009-01-27 01:11</span></div>
<div class='content'>
Btw, more docs required.  You need to do something like:<BR/><BR/>bzr branch lp:bzr-removable ~/code/bzr-removable<BR/>ln -s ~/code/bzr-removable/removable ~/.bazaar/plugins/removable</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/03/ok-i-lied_17.html">OK I lied</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-03-18T00:00:00+00:00" pubdate data-updated="true">2008-03-18 Tuesday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The next post is actually about a Bazaar plugin that I&#8217;ve now got ready to share. To get it, &#8216;bzr branch lp:~jml/+junk/merged-branches&#8217;.<br /><br />Once you&#8217;ve got it, run &#8216;bzr merged-branches&#8217; in the trunk of your project. It will then show you all branches in sibling directories that are safe to delete.  That is,<br /><ul><br />	<li>They have no uncommitted changes.</li><br />	<li>They have no &#8220;unknown&#8221; files. (Files outside of version control that haven&#8217;t been explicitly ignored.)</li><br />	<li>They have no shelved changes. The plugin will only check for this if it can find bzrtools.</li><br /></ul><br />The branch is now at the point where it works for me, but it still belongs in &#8216;+junk&#8217; — here&#8217;s why:<br /><ul><br />	<li>It assumes that you have a trunk branch in the same directory as all of your other branches.</li><br />	<li>It assumes that branches and working trees are the same thing.</li><br />	<li>It&#8217;s called &#8216;merged-branches&#8217; when it really means &#8216;safe-to-delete&#8217;.</li><br />	<li>It doesn&#8217;t make it easy to see why a branch is <em>not</em> safe to delete.</li><br />	<li>It doesn&#8217;t let you customize the conditions of the search. Maybe you want to see all branches with uncommitted changes.</li><br /></ul><br />Still, if you are like me and make a lot of branches, it&#8217;s quite useful. I&#8217;ll tolerate bugs, accept patches and welcome encouragement.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/03/user-experience-when-reality-attacks_12.html">User Experience — When Reality Attacks</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-03-12T00:00:00+00:00" pubdate data-updated="true">2008-03-12 Wednesday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve just got back from a hectic week in London, where members of the Bazaar community got together and thrashed out a bunch of important topics.<br /><br />We talked about &#8220;user experience&#8221; and how we all want Bazaar to be a joy to use. More than one person said that we have been focusing too much on features and performance instead of user experience. The term was never really pinned down, but it&#8217;s fair to say that there are things other than convenience and speed that affect how users feel while using Bazaar and that we need to work on those things, once we figure out what they are.<br /><br />I think I might know the name of one of them: <em>errors</em>. Next post: &#8220;Notes on error&#8221;.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/02/three-ways-on-pidgin.html">Three-ways on Pidgin?</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-02-17T00:00:00+00:00" pubdate data-updated="true">2008-02-17 Sunday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Dear Lazyweb,<br /><br />How do I initiate a three-way chat with Pidgin 2.2.1?<br /><br />jml</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/02/what-i-do-all-day_14.html">What I do all day</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-02-15T00:00:00+00:00" pubdate data-updated="true">2008-02-15 Friday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Kick-arse summary here: <a href="http://news.launchpad.net/general/the-great-source-code-supermarket">The great source code supermarket. </a></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/02/economist-index_10.html">The Economist Index</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-02-11T00:00:00+00:00" pubdate data-updated="true">2008-02-11 Monday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<em>The Economist</em> occasionally publishes a &#8220;Big Mac Index&#8221; — how much the world&#8217;s favorite &#8220;burger&#8221; costs in each country, translated into a common currency.<br /><br />Why they don&#8217;t publish an index of how much an issue of the Economist costs?  All of my issues have the price of the newspaper in lots of Asia-Pacific currencies. A small sample:<br /><ul><br />	<li>Australia, 9.39855 USD</li><br />	<li>Cambodia, 6.00 USD</li><br />	<li>China, 10.43655 USD</li><br />	<li>Hong Kong, 7.6917 USD</li><br />	<li>India, 5.0522 USD</li><br />	<li>Japan, 10.70535 USD</li><br />	<li>New Zealand, 8.6669 USD</li><br /></ul><br />Can anyone tell me why the price varies so much?</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/21/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/19/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/04/deliberately-being-naughty.html">Deliberately being naughty</a>
      </li>
    
      <li class="post">
        <a href="/2013/02/testtools-moved-to-github.html">testtools moved to Github</a>
      </li>
    
      <li class="post">
        <a href="/2013/02/are-single-variable-names-evil.html">Are single letter variable names evil?</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/getting-set-up-with-twisted-development.html">Getting set up with Twisted development</a>
      </li>
    
      <li class="post">
        <a href="/2012/11/whats-wrong-with-orms.html">What&#8217;s wrong with ORMs</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/jml">@jml</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jml',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/jonathan.lange?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Jonathan Lange -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
