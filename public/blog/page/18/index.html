
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mere Code</title>
  <meta name="author" content="Jonathan Lange">

  
  <meta name="description" content="So, I think I&#8217;ve figured out what it is I dislike about Twisted&#8217;s review process: reviews aren&#8217;t thorough enough.This sounds a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://code.mumak.net/blog/page/18/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Mere Code" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">(</div>
  	<div id="logoText">jml</div>
  	<div id="logoRight">)</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Mere Code</a></h1>
  
    <h2>Diverse Topics of General Interest to the Practicing Programmer</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:code.mumak.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About this blog</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/11/review-thoughts.html">Review Thoughts</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-11-15T00:00:00+00:00" pubdate data-updated="true">2008-11-15 Saturday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
So, I think I&#8217;ve figured out what it is I dislike about Twisted&#8217;s review process: reviews aren&#8217;t thorough enough.<br /><br />This sounds a little weird, since it&#8217;s actually <span style="font-style: italic;">really hard</span> to get a patch into Twisted: it almost always takes me at least three round trips just to get something in. But I think the number of round-trips is actually a symptom of this lack of completeness.<br /><br />In Launchpad, reviews are done as in-line replies to diffs. A reviewer is obliged to note each chunk of code that needs to be changed, along with exactly what needs to be changed. In Twisted, reviews are done as Trac comments and generally provided as bullet points. In Launchpad, a reviewer would say, &#8220;You need to change foo_bar to fooBar, because our coding standards require camel case&#8221;. In Twisted, a reviewer might say &#8220;There are some naming convention issues&#8221;.<br /><br />This obviously varies between reviewers and even between reviews, but I think that the difference in technologies encourages differences in review style.<br /><br />As a patch submitter, I find the in-line-comments-on-diff form much more helpful. It provides me with a convenient todo list, and it lets me know that the reviewer has looked through and tried to understand all of my code. It essentially turns the review into a series of mini bug reports with &#8220;observed, expected, how to reproduce&#8221; sections (where &#8220;how to reproduce&#8221; is &#8220;where to find&#8221;).<br /><br />I also like it as a reviewer, since it means less typing.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2008-11-17 22:24</span></div>
<div class='content'>
So, glyph, vague comments do have *something* to do with the tools, because with some technologies it&#39;s easier to be specific. Email quoted reply, for example.<BR/><BR/>I don&#39;t have anything as good as &quot;jump to an FQPN&quot;. I do have etags though, which is generally good enough.<BR/><BR/>My own toolchain for navigating big emails could probably be better. At the moment I use Gmail&#39;s &quot;collapse quoted text&quot; feature and that solves most of my problems.<BR/><BR/>The other big advantage of email (which you could get from other tools, I guess) is that as the *reviewer* I can easily see which of my points the author has replied to, and more importantly, which points they haven&#39;t.<BR/><BR/>Other points worth mentioning is that Launchpad tries to keep diff size down (you need to specially arrange a reviewer if your diff is &gt; 800 lines). This probably has an impact on tool experience.<BR/><BR/>I agree that something higher level would be much better. Perhaps we can con Barry into writing such an emacs mode?</div>
</div>
<div class='comment'>
<div class='author'>Michael Hudson<span class='comment-date'> on 2008-11-17 10:33</span></div>
<div class='content'>
I think that most of what glyph wants could probably be done with a sufficiently advanced major mode for Launchpad style review-amongst-quoted-diffs.  Not that I&#8217;m going to write this any time soon.<BR/><BR/>One of the problems with the fancy web-based solutions &#8211; have glyph or jml tried any of them?  I haven&#8217;t &#8211; is that you can&#8217;t use emacs, of course.<BR/><BR/>I also don&#8217;t have <I>all</I> that much experience with Twisted&#8217;s development process yet &#8211; hopefully that will change soon :)</div>
</div>
<div class='comment'>
<div class='author'>glyph<span class='comment-date'> on 2008-11-17 01:48</span></div>
<div class='content'>
There were a few things that I realize were implicit in my last comment.  For one thing, I didn&#8217;t make it clear how much I agree with the experience you&#8217;re espousing.  I always copy review comments into an outline buffer and delete each point as I deal with it, using it as a nice to-do list with a built in progress meter.  I actually find that emailed diffs make this much harder to do.<BR/><BR/>I also offered no specific criticism of the suckage of email and diffs.<BR/><BR/>I find scrolling around hundreds of lines of un-annotated context difficult, and (without reconfiguring my editor to use extremely loud font faces) I find it easy to miss individual points, and I spend a lot more time reading code that I wrote.  I also find it very easy to get a hunk of diff and have no idea what chunk of code it refers to without scrolling around.  Even without my aforementioned elisp, I find it a lot easier to manually translate the string &#8220;twisted.web.server.Request.render&#8221; into some file/line pair in my editor than &#8220;@@ -187,7 +187,7 @@&#8221;.<BR/><BR/>Maybe this is because I prefer to work through reviews in issue order, not in file order; i.e. if there&#8217;s a problem with the structure of some API, I will fix issues with the tests and the code at the same time.</div>
</div>
<div class='comment'>
<div class='author'>glyph<span class='comment-date'> on 2008-11-17 01:32</span></div>
<div class='content'>
I may have made my argument too strongly.<BR/><BR/>I can definitely see some advantages to using email.  Having dealt with a couple of your reviews written in this style now, I can appreciate its subjective impact, at least a little.  Personally I find it a wash with the way that I&#8217;m doing things now.  <BR/><BR/>Your comment about feedback like &#8220;there are some coding standard issues&#8221; is well-taken.  This is a pretty crappy form of comment, and we should try to keep that in mind ourselves and also educate other reviewers about what constitutes a good comment.  I don&#8217;t think this actually has anything to do with the tools, because I&#8217;ve gotten (and written) lots of reviews that don&#8217;t make that mistake.<BR/><BR/>My favorite kind of review is where everything is phrased in terms of FQPNs; there is a button in my editor which can (sort of) take me directly to the definition of an FQPN, so it&#8217;s a very quick copy/paste.<BR/><BR/>My main point, though, is that these are both rough approximations of what we actually want.  You don&#8217;t want to type into the middle of a hunk of diff; I don&#8217;t want to copy and paste an FQPN into some bespoke secret elisp.  We both want to abstractly indicate a region of changed code and annotate it during the review process, then send those annotations back to the author in a format where they can easily see them.<BR/><BR/>I can see how emailing commentary on diffs more closely approximates this ideal for you.  For me, it does not, and I prefer ticket comments with module names in them.  But let&#8217;s not lose sight of the fact that both experiences are terrible next to being able to push a button in your editor and see the next feedback comment you have to deal with, right next to the code that the feedback is on.<BR/><BR/>If you have a mechanism to jump directly to a region of code in emacs based on a mangled / email-quoted diff, though, I&#8217;d be very interested :).</div>
</div>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2008-11-16 02:11</span></div>
<div class='content'>
glyph, certainly the diff format has a lot of problems and using something richer that could provide more context would be better.<BR/><BR/>But regarding cramming &#8220;the immense suckage of email into the already sucky world of code review&#8221;, I think you&#8217;d be surprised. By and large, we find doing reviews email <I>less</I> sucky.<BR/><BR/>Part of the reason is that you get a diff and a cover letter in your inbox, you type your recommended changes next to the code that causes them, then push a button that sends a review. It really is quite close to what you describe in paragraph 3.<BR/><BR/>I think that using numbers rather than bullets is definitely an improvement, but you get essentially that for free with email quoting.<BR/><BR/>If you can, you should contrive a way to experiment with doing reviews by email.<BR/><BR/>Also, fwiw, I&#8217;m not sure this is a Canonical-wide thing. I think Landscape uses a system much more like Twisted&#8217;s, for example.</div>
</div>
<div class='comment'>
<div class='author'>glyph<span class='comment-date'> on 2008-11-16 01:56</span></div>
<div class='content'>
I feel like these are all kind of sad little workarounds for what I believe we all really want.<BR/><BR/>When I&#8217;m going to review a branch, I want to get a side-by-side diff view <I>where I actually write code</I>, i.e. Emacs, that looks something like Meld.  I want to have the merged code in my working copy so that I can run unit tests locally.  Ideally, I&#8217;d like to have that same UI for transparently running the code on the buildbots as well, but we&#8217;re getting pretty far afield into fantasy at that point&#8230;<BR/><BR/>I want to be able to annotate the changes by indicating them directly and typing them next to the changed region of code.  Then, when I&#8217;m done writing comments&#8230; I just want to push a button and send the review!  I don&#8217;t want to screw around with my mail client, push buttons on a web page, or anything like that.<BR/><BR/>Guido&#8217;s code review stuff (is codereview.appspot.com the same as Rietveld?) and reviewboard both kinda-sorta get this done, but with a god-awful amount of mousing around.  The &#8220;Show 10 Above / Show 10 Below&#8221; thing on codereview.appspot.com is a hilarious example of how bad this gets.  I don&#8217;t want to see &#8220;10 more lines&#8221; of diff, I want to know what goddamn class definition this method is a part of!<BR/><BR/>Anything that involves chopping up unstructured unified-diff content and reading it or writing about it is sucky.  Anything that separates the code from the diff from the ticket from the review is sucky.  I can definitely see the advantages of doing things the Canonical way, but I can also see the immense disadvantages of trying to cram the immense suckage of email into the already sucky world of code review.<BR/><BR/>Personally an emerging feature I like about Twisted&#8217;s review process is that reviewers are starting to use enumerated lists rather than bullet points, so it&#8217;s easy to refer to a point in subsequent comments and re-reviews.  But, in the system I&#8217;d really like to be using, that would all be automatic.</div>
</div>
<div class='comment'>
<div class='author'>intellectronica<span class='comment-date'> on 2008-11-15 23:52</span></div>
<div class='content'>
I agree, and I hope that as the review facilities in LP evolve, we&#8217;ll grow something that leads users in this direction. One of the things I really like about Launchpad is the (implicit, but nevertheless very clear) approach of building an opinionated tool, a there-is-only-one-way-to-do-it tool. Once we&#8217;ve identified a process that works very well we should make Launchpad support this process and no other. I don&#8217;t know if Rietveld is the answer, but I hope that eventually we&#8217;ll have some kind of rich review tool that helps you do the right thing.</div>
</div>
<div class='comment'>
<div class='author'>Benjamin<span class='comment-date'> on 2008-11-15 16:48</span></div>
<div class='content'>
You might be interested in Guido van Rossum&#8217;s Rietveld. [1] You just add the URL of your SVN repo, submit a patch, and tada: inline comment reviews. We&#8217;ve been using quite happily with core Python dev. The only annoying thing is posting your patch to the bug tracker and Rietveld, but that could be negated with Trac integration.<BR/><BR/>[1] http://codereview.appspot.com</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/11/papers-and-talks.html">Papers and Talks</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-11-01T00:00:00+00:00" pubdate data-updated="true">2008-11-01 Saturday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
At the Launchpad Epic, I presented a paper on Twisted for the other Launchpadders. I think that the paper itself is a good introduction to how Twisted works and why, and I&#8217;ll be publishing it here once I get a chance to format it for the web.<br /><br />I did two lightning talks that might be interesting to readers. One was on <a href="https://launchpad.net/testresources">testresources</a> and the other was on how to hack like an Evil Overlord. I think I&#8217;ll try present the second one at OSDC.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/10/langes-law.html">Lange&#8217;s Law</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-10-30T00:00:00+00:00" pubdate data-updated="true">2008-10-30 Thursday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
&#8220;With threads, all things are possible.&#8221;</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>RAOF<span class='comment-date'> on 2008-10-30 20:58</span></div>
<div class='content'>
The Halse Rogers Corollary:<BR/>As the space of correct programs has infinitesimal measure on the space of possible programs, expanding the program space to include threads ensures at least one profanity-inducing threading bug.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/10/stacked-branches-in-launchpad.html">Stacked branches in Launchpad</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-10-16T00:00:00+01:00" pubdate data-updated="true">2008-10-16 Thursday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Via the medium of the charming <a href="http://www.understated.co.uk/">Matthew Revell</a>, I&#8217;ve posted about <a href="http://news.launchpad.net/cool-new-stuff/stacked-branches-holding-post">stacked branches</a> on the Launchpad News blog. I&#8217;m so glad this is finally out.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/10/super-happy.html">Super Happy?</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-10-07T00:00:00+01:00" pubdate data-updated="true">2008-10-07 Tuesday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Does Sydney have a Super Happy Dev House or Hacking Society or <span style="font-style: italic;">anything</span> where a bunch of busy programmers can sit down together and <span style="font-style: italic;">hack</span>?<br /><br />If not, could you please organize one for me — that&#8217;d be great.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Joel Franusic<span class='comment-date'> on 2008-10-08 01:08</span></div>
<div class='content'>
You should organize one yourself! I&#8217;d be more than happy to talk about the logistics of setting up a DevHouse. (You can email me at first @ lastname .com)</div>
</div>
<div class='comment'>
<div class='author'>spiv<span class='comment-date'> on 2008-10-07 11:56</span></div>
<div class='content'>
There&#8217;s a &#8220;Codecon&#8221; that happens once a year, although it&#8217;s really coding + camping.  The most recent was <A HREF="http://slug.org.au/node/104" REL="nofollow">http://slug.org.au/node/104</A>.<BR/><BR/>I can&#8217;t think of anything else off the top of my head.</div>
</div>
<div class='comment'>
<div class='author'>rockstar<span class='comment-date'> on 2008-10-07 04:24</span></div>
<div class='content'>
We can set up a Sydney Hacking Society chapter if you&#8217;d like.  You&#8217;d have to do the actual organizing though.  :)</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/10/more-bzr-hacking.html">More bzr hacking</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-10-06T00:00:00+01:00" pubdate data-updated="true">2008-10-06 Monday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve extended bzr-establish to give it a new command: hack.<br /><br />&#8216;bzr hack lp:foo&#8217; will create a repository with working trees called &#8216;foo&#8217; and fetch the lp:foo branch into that repository.<br />&#8216;bzr hack &#8211;repository ~/repos lp:foo&#8217; will create a repository in &#8216;~/repos/foo&#8217;, a working tree area in &#8216;foo&#8217;, fetch the branch into the repo and make a light-weight checkout in the working tree area.<br /><br />You can also specify a non-Launchpad branch, e.g. &#8216;bzr hack http://example.com/some/branch/trunk foo&#8217;. This will make a repository called &#8216;foo&#8217;, put the branch in there and&#8230; well, you get the picture.<br /><br />The plugin lives at lp:~jml/+junk/bzr-establish. It&#8217;s buggy, not particularly well tested and rough as guts. Still, it&#8217;s worth a play.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2008-10-07 02:24</span></div>
<div class='content'>
Bugger that!<BR/><BR/>I want someone to tell me it&#8217;s not a terrible idea first. (Also, I&#8217;m thinking about petitioning abentley to add them to bzrtools)</div>
</div>
<div class='comment'>
<div class='author'>spiv<span class='comment-date'> on 2008-10-07 00:14</span></div>
<div class='content'>
Tell you what: make a real Launchpad project out of it so that I have somewhere to report bugs, then I&#8217;ll have a play ;)</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/10/testresources-some-examples.html">testresources: some examples</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-10-04T00:00:00+01:00" pubdate data-updated="true">2008-10-04 Saturday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
There&#8217;s been a clamor for more documentation on how to use <a href="https://launchpad.net/testresources">testresources</a>. While I&#8217;m not qualified to show you the <span style="font-style: italic;">best</span> way to use it, I can show you the way that I would begin to use it.<br /><br />The linked files are a bunch of unit tests for database code that uses <a href="http://storm.canonical.com/">Storm</a>. Where a real test suite might use an in-memory database, this test suite uses on on-disk sqlite database to better illustrate testresources. This database needs to be removed and built again after each test to guarantee test isolation.<br /><br />You&#8217;ll need testresources, Storm and testtools in your Python import path to run these examples.<br /><br />The first file, <a href="http://static.mumak.net/complex-example.py">complex-example.py</a>, shows how I might do this without testresources. I create a DatabaseService class that has a setUp and tearDown of its own, and a get_store() method that tests are likely to use. This might not be the best thing for databases, but is very close to what I&#8217;d do for network services in tests, where I would need to start the service, stop it and have methods to get URLs, clients and other information about the service. If you run the file, you&#8217;ll see that the database is <span style="font-style: italic;">created</span> at the start of each test, and <span style="font-style: italic;">destroyed</span> before the test finishes. In total, it&#8217;s created and destroyed three times.<br /><br />The second file, <a href="http://static.mumak.net/complex-example-2.py">complex-example-2.py</a>, shows how to switch to using testresources. To do this I,<br /><ul><li>added a TestResource subclass called DatabaseResource that implements make() and clean() by delegating to a DatabaseService.</li><li>changed the test case to subclass ResourcedTestCase</li><li>added &#8216;resources = [(&#8216;database&#8217;, DatabaseResource())] as a class variable of the test case.</li></ul>Instead of using DatabaseService() in the test, I could have, and perhaps should have, declared a module level instance of DatabaseResource. In that case, the code would have looked like:<br /><pre>class _DatabaseResource(TestResource):<br />...<br />DatabaseResource = _DatabaseResource()<br /><br />class TestPerson(unittest.TestPerson):<br />...<br />resources = [('database', DatabaseResource)]<br />...<br /></pre><br />Running the file shows that the behaviour is the same as the first example: the database is <span style="font-style: italic;">created</span> and <span style="font-style: italic;">destroyed</span> in each test.<br /><br />The third file, <a href="http://static.mumak.net/complex-example-3.py">complex-example-3.py</a>, shows how to take advantage of OptimisingTestSuite (sic). We load the test suite as usual, <span style="font-style: italic;">adsorb</span> (sic) them into an OptimisingTestSuite and return that. We also have to explicity declare when a test <span style="font-style: italic;">dirties</span> the DatabaseResource. I chose to do this by adding a dirtied() method to the DatabaseService. If I had used a singleton (as above), then I would have just called dirtied on that.<br /><br />Anyway, if you run the third example, you&#8217;ll see that the database is <span style="font-style: italic;">created</span> and <span style="font-style: italic;">destroyed</span> outside the tests and that its only done <span style="font-style: italic;">twice</span>. The test suite has been optimized by sharing resources between tests when possible.<br /><br />I hope this helps explain how to use testresources. Certainly writing has been a useful exercise for me, it&#8217;s highlighted that:<br /><ul><li>a list of 2-tuples isn&#8217;t quite right for declaring which resources a test uses.</li><li>the dirtied API is inconvenient</li><li>TestResource remains a confusing name for the class, as it conflates the resource acquisition and cleanup with the actual <span style="font-style: italic;">resource</span>.</li><li>Some of the API docs are wrong (notably the ones for ResourcedTestCase).</li><li>The pattern of &#8220;resource object with setUp, tearDown, dirtied (and addCleanup)&#8221; should perhaps be turned into Python code.</li></ul>I long for your thoughts.<br /><br />Examples:<br /><br /><a href="http://static.mumak.net/complex-example.py">complex-example.py</a><br /><a href="http://static.mumak.net/complex-example-2.py">complex-example-2.py</a><br /><a href="http://static.mumak.net/complex-example-3.py">complex-example-3.py</a><br /><br /><b>Update:</b> Correct links to example Python files.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2011-04-15 11:57</span></div>
<div class='content'>
*ahem* https://answers.launchpad.net/testresources</div>
</div>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2011-04-15 11:57</span></div>
<div class='content'>
Not really. testresources may have changed a lot since I wrote this blog post. I&#39;m not using it day-to-day these days.<br /><br />Your best hope for getting help is to ask a question on  or to ask &#39;lifeless&#39; on the #python-testing channel on Freenode.<br /><br />Good luck!</div>
</div>
<div class='comment'>
<div class='author'>Max Magee<span class='comment-date'> on 2011-04-14 19:17</span></div>
<div class='content'>
Sorry to be a bother, but I&#39;m elbows deep in an implementation of testresources currently, and I&#39;m getting &quot;TypeError: make() takes exactly 1 argument (2 given)&quot; in each test case (method of the ResourcedTestCase class).<br /><br />I went back and reconstructed the 3rd complex example from your .py and Storm, and I get the exact same error from testresources.__init__ (where I am getting it in mine).  Does this ring a bell?</div>
</div>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2011-04-14 18:08</span></div>
<div class='content'>
I&#39;m glad you liked it, and that it&#39;s still useful years later.<br /><br />In an ideal world, yes. However, there&#39;s no way for the test framework to predict which tests will dirty which resources. Within a group of tests that declare the same resources, they just run in alphabetical order.</div>
</div>
<div class='comment'>
<div class='author'>Max Magee<span class='comment-date'> on 2011-04-13 22:07</span></div>
<div class='content'>
Thanks for posting this example.  I&#39;ve been struggling to understand testresource (coming from PyUnit backgroun) and your third example is the most helpful I&#39;ve seen so far.<br /><br />One question- why do you say the database gets created and destroyed <i>twice</i> in that example?  If they&#39;re optimized, shouldn&#39;t the test case that dirties the database be run last, then simply tear the db down at the end of the test run- so only <i>one</i> invocation of setup and tear down total?</div>
</div>
<div class='comment'>
<div class='author'>spiv<span class='comment-date'> on 2008-10-06 05:44</span></div>
<div class='content'>
Fully “sic” bro. :)</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/10/pyunit3k-renamed-to-testtools.html">pyunit3k renamed to testtools</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-10-04T00:00:00+01:00" pubdate data-updated="true">2008-10-04 Saturday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
After thinking and talking about it for ages, I&#8217;ve renamed &#8216;pyunit3k&#8217; to &#8216;testtools&#8217;. You can now find it at https://launchpad.net/testtools or get your copy by running &#8216;bzr branch lp:testtools&#8217;.<br /><br />This is the only major API change I plan to do without introducing some sort of formal release process. The code as it stands is highly stable, well tested and in use on production systems. Download it, use it, send me patches.<br /><br /><span style="font-weight: bold;">Addendum</span><br />I forgot to mention that ITestResult has been removed, and thus the undocumented dependency on zope.interfaces. If this matters to you, please let me know.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>James Henstridge<span class='comment-date'> on 2008-10-09 05:08</span></div>
<div class='content'>
Doesn&#8217;t testresources now depend on the old name of this library?  That&#8217;d be a good thing to get fixed.<BR/><BR/>The new name seems better: after all, the library isn&#8217;t &#8220;pyunit for Python 3000&#8221; &#8230;</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/10/bazaar-hacking.html">Bazaar hacking</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-10-04T00:00:00+01:00" pubdate data-updated="true">2008-10-04 Saturday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I spent a little bit of time mucking around with some Bazaar plugin ideas I&#8217;ve had.<br /><br />The first is a command that switches from &#8220;branches and trees together inside a shared repository&#8221; to &#8220;treeless repository with lightweight checkouts&#8221;. I ran it against a couple of my local repositories and it works out rather nicely. If you are thinking of using cbranch and the like, you should have a look at this plugin. If you don&#8217;t know why it&#8217;s a good idea, well, umm, maybe one of the <a href="http://planet.bazaar-vcs.org">other people on the Planet</a> will blog an answer.<br /><br />The second adds &#8216;bzr new&#8217; to the command list.<br />    $ bzr new awesomer<br /><br />will create a new shared repository called &#8216;awesomer&#8217; and a new branch in that repository called &#8216;trunk&#8217;. If you think trunk is a terrible name, you can do:<br />    $ bzr new awesomer devel<br /><br />If you are like Tim or Aaron, you&#8217;ll want your repository and branches separated from your working tree:<br />    $ bzr &#8211;repository ~/repos/foo foo devel<br /><br />I&#8217;d like to figure out a nice way of letting users specify a default directory for repositories to go into, for those people who always use the split model.<br /><br />The plugin with both of these commands can be found at https://code.edge.launchpad.net/~jml/+junk/bzr-establish. As the &#8220;junk&#8221; in the name indicates, it&#8217;s really rough code.<br /><br />If either of these features sound like good ideas to you, let me know!</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Aaron Bentley<span class='comment-date'> on 2008-10-04 21:35</span></div>
<div class='content'>
There basically aren&#8217;t any branch formats that are incompatible with repository formats.  You&#8217;d have to go back to formats that were current for bzr 0.7 to find such a thing.</div>
</div>
<div class='comment'>
<div class='author'>rockstar<span class='comment-date'> on 2008-10-04 18:22</span></div>
<div class='content'>
The functionality in bzr new is great, but I very rarely start a project with a shared repo.  Mostly, the branch comes first to see if the work in a branch is even worth it.<BR/><BR/>I was working on a similar idea of doing the shared repo and branch in one command thing.  My idea was more about branching the trunk of another project into a shared repo.  However, while I could get basic functionality, I got blocked on cases where the branch format is incompatible with the repo created, and found it difficult to check the existing branch&#8217;s format, to make a compatible repo.  I&#8217;ve tried a few approaches to no avail.  :(</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2008/10/lca-2008-conference-report.html">LCA 2008 Conference Report</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2008-10-03T00:00:00+01:00" pubdate data-updated="true">2008-10-03 Friday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Yeah, yeah, I know it&#8217;s a bit late. I found this while emptying out my Drafts folder and thought you guys might like it.<br /><br />It&#8217;s very much a personal, in-the-moment, opinionated account. I&#8217;ve only edited it for formatting.<br /><br /><span style="font-weight: bold;">Sunday, January 27</span><br /><br />Arrived in Melbourne. Good. Next step, dump bags and get beer. Bump into skinny guys with puns on their T-shirts and hunted expressions. Follow them to pub. Rusty is buying free drinks for first-timers. I take two.<br /><br />Go to Lygon Street. Eat pizza.<br /><br /><span style="font-weight: bold;">Monday, January 28</span><br /><br />Public holiday today. No coffee for sale on campus. The buzz so far is that everyone loves Ubuntu, or at least takes it for granted — which can sometimes pass for love.<br /><br />The chatter about Bazaar is more interesting. Everyone says &#8220;Bee-Zed-Ahh&#8221; and lists it along with Git and Mercurial. When I talk to people, they don&#8217;t seem to really care about VCS, they just fall in whatever their project uses. Those who have used DVCS talk about &#8220;modern version control&#8221; (distributed) and &#8220;legacy version control&#8221; (CVS, SVN). Those who haven&#8217;t aren&#8217;t even aware of how much DVCS can help:<br /><br /> <jml> jml: [[ something about branches ]]<br /> <other_guy>other_guy: yeah, I know what branches are.<br /> <jml> jml: but we make a new branch for every single bug fix.<br /> <other_guy> other_guy: what? how can you do that? isn&#8217;t that an pain in the arse?<br /> * jml takes other_guy aside and quietly explains.<br /><br />The guy who talked about securing code — making sure the stuff you release is the stuff you wrote — knew about Bazaar&#8217;s GPG revision signing, but didn&#8217;t like it. I reckon there&#8217;s some nice stuff we could do here.<br /><br />At the Debian miniconf, I sat down and listened to someone explain how to use Git to make Debian packages. The speaker kept saying &#8220;&#8230; because Git is stupid&#8221; and then showed us a diagram that had more lines than a telephone exchange.<br /><br />He also did an interactive demo. Before then, I hadn&#8217;t seen git being used. It&#8217;s not a friendly application. I mentioned this to some people on the way out and got answers that were too complex for a hallway. Bazaar rocks, we just need to get people to <span style="font-style: italic;">use</span> it.<br /><br />Went to the OpenSSH talk. It was packed, and the content was interesting, strong and a little dry. Got some ideas for improving Conch (the SSH server that Launchpad uses for codehosting).<br /><br /><span style="font-weight: bold;">Tuesday, January 29</span><br /><br />At the Gnome mini conf, trying to get a leg up into contributing. My grand aim is to get a calendar on my desktop that is as beautiful and pleasurable as iCal.<br /><br />It seems that lots of others share my desire. I ended up chatting to Rob Bradford from Opened Hand and a couple of other Gnome guys — it sounds like it might be approaching possible.<br /><br />Found my phone charger.<br /><br /><span style="font-weight: bold;">Wednesday, January 30</span><br /><br />Bruce Schneier keynoted. The talk had a few ideas but was light on point. The tutorial on hardening Linux apps was cancelled, and I&#8217;m now sitting here while Russell Coker talks about SELinux.<br /><br /><span style="font-weight: bold;">Thursday, January 31</span><br /><br />Tired and cranky. Decide to do some hacking.<br /><br /><span style="font-weight: bold;">Friday, February 1</span><br /><br />It&#8217;s 6:45pm now and all I can think about is signing off and zoning out. Lots of cool talks today.<br /><br />During the Speaker&#8217;s Panel, someone asked &#8220;What was your favourite thing that happened in Open Source last year?&#8221;. One person put up their hand and said &#8220;git&#8221;.</other_guy></jml></other_guy></jml></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/19/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/17/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/04/deliberately-being-naughty.html">Deliberately being naughty</a>
      </li>
    
      <li class="post">
        <a href="/2013/02/testtools-moved-to-github.html">testtools moved to Github</a>
      </li>
    
      <li class="post">
        <a href="/2013/02/are-single-variable-names-evil.html">Are single letter variable names evil?</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/getting-set-up-with-twisted-development.html">Getting set up with Twisted development</a>
      </li>
    
      <li class="post">
        <a href="/2012/11/whats-wrong-with-orms.html">What&#8217;s wrong with ORMs</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/jml">@jml</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jml',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/jonathan.lange?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Jonathan Lange -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
