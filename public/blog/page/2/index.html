
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mere Code</title>
  <meta name="author" content="Jonathan Lange">

  
  <meta name="description" content="OK, I think I&#8217;ve figured it out.juju debug-hooks replaces hooks for a service unit with an interactive terminal session. You run it, it &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://code.mumak.net/blog/page/2/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Mere Code" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">(</div>
  	<div id="logoText">jml</div>
  	<div id="logoRight">)</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Mere Code</a></h1>
  
    <h2>Diverse Topics of General Interest to the Practicing Programmer</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:code.mumak.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About this blog</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/06/juju-debug-hooks.html">juju debug-hooks</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-06-26T00:00:00+01:00" pubdate data-updated="true">2012-06-26 Tuesday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
OK, I think I&#8217;ve figured it out.<br /><br /><a href="https://juju.ubuntu.com/docs/hook-debugging.html">juju debug-hooks</a> replaces hooks for a service unit with an interactive terminal session. You run it, it launches <a href="http://tmux.sourceforge.net/">tmux</a> (which seems to be a thing like screen or byobu), and when a hook for that service unit runs, it<i> won&#8217;t</i> run the hook in the charm, rather it opens a new window and you can then do whatever you want in that. Including manually running the hook in the charm.<br /><br />debug-hooks doesn&#8217;t actually do anything to your hooks, nor does it increase the amount of information available to you (e.g. by increasing log verbosity). It just replaces hooks with terminal sessions.<br /><br />You have to know the service unit first, e.g. libdep-service/41.<br /><br />It seems as if it&#8217;s a really common thing to want to use debug-hooks on install. There doesn&#8217;t seem to be any smooth way. As far as I can tell, you have to run &#8216;juju deploy&#8217;, run &#8216;juju status&#8217;, quickly note the unit name and then run &#8216;juju debug-hooks&#8217;.<br /><br />That aside, it&#8217;s very useful. I found myself using it to edit hooks (and puppet files used by my hooks) and re-run them until they worked.<br /><br />Still don&#8217;t know easy way of exporting changes to a charm on a unit back down to my laptop.<br /><br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/06/tricks-for-exploring-new-languages.html">Tricks for exploring new languages?</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-06-25T00:00:00+01:00" pubdate data-updated="true">2012-06-25 Monday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Here&#8217;s my problem. There are a bunch of languages I want to explore more (Clojure, Haskell, Go). I&#8217;ve wanted to do this for some time. I haven&#8217;t done it. I&#8217;ve <a href="http://code.mumak.net/2012/02/bad-snake-joke.html">mentioned this before</a>.<br /><br />At it&#8217;s simplest and most fundamental, this comes down to poor self-management stemming from an inaccurate personal vision. That is, &#8220;If it&#8217;s important, you&#8217;ll find a way. If not, you&#8217;ll find an excuse.&#8221;<br /><br />But, setting aside deep-level character hacking, there&#8217;s got to be something to make this easier. Part of the problem is that Python is so smooth, I&#8217;ve been with it so long and most of the technologies I want to interact with have a strong Python component. Any time I have an itch that needs scratching, Python is the comforting abrasive of choice. I can do whatever it is about 10x faster with it than with another, new language.<br /><br />Perhaps all I need to do is gird my loins and prepare myself for the confusion and time expenditure that comes with <a href="http://code.mumak.net/2012/06/further-reflections-on-my-first-juju.html">learning </a>anything <a href="http://code.mumak.net/2012/06/unfiltered-reflections-on-my-first-juju.html">new</a>.<br /><br />Gentle reader, do you have any tips for escaping the Python gravity well and exploring languages unknown?<br /><br /></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2012-06-29 18:45</span></div>
<div class='content'>
Anand, SICP is great! I really liked &quot;Real World Haskell&quot; (O&#39;Reilly book, available for free online IIRC) as a way to learn Haskell.</div>
</div>
<div class='comment'>
<div class='author'>Anand<span class='comment-date'> on 2012-06-28 05:13</span></div>
<div class='content'>
Building a Python-X bridge might be a good idea to understand the runtime of X, but that may not be the niche area of X.<br /><br />I don&#39;t agree with glyph that you shouldn&#39;t leave your comfort zone. In fact, you should leave your comfort zone and <a href="http://matt.might.net/articles/programmers-resolutions/" rel="nofollow">embrace the uncomfortable</a>.</div>
</div>
<div class='comment'>
<div class='author'>Anand<span class='comment-date'> on 2012-06-28 05:11</span></div>
<div class='content'>
I&#39;ve been struggling with the same trouble. Trying to learn Haskell from long time.<br /><br />I&#39;ve learnt Scheme in the past at a quite good pace by studying <a href="http://mitpress.mit.edu/sicp/" rel="nofollow">SICP</a>. I think having incremental exercises to try makes it easier to learn a new language. I haven&#39;t found something like that for Haskell yet.</div>
</div>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2012-06-26 09:09</span></div>
<div class='content'>
Keeping a journal, or at least a place to dump notes is something I do a lot of.  Collaborators &amp; long-time readers of this blog have my bullet-pointed reflections inflicted on them more than once.<br /><br />On G+, Gustavo recommended picking a project for which the result matters, but not necessarily the timeliness. I think that&#39;s a really good idea.</div>
</div>
<div class='comment'>
<div class='author'>glyph<span class='comment-date'> on 2012-06-26 07:17</span></div>
<div class='content'>
Perhaps don&#39;t push yourself so hard to leave the Python ecosystem entirely; if you&#39;re comfortable there, and that&#39;s what you really want to be doing with your spare time, don&#39;t fight it, embrace it.  For example, I have a reasonably good grasp of ObjC and a pretty wide breadth of ObjC APIs now due to messing with PyObjC bridging.  If you want to learn Go, and no Python-Go bridge exists, make one, and I&#39;m sure you&#39;ll learn a ton about the Go runtime :).  Then you can do some things up to the edge of your comfort zone, and when you get to something that Python isn&#39;t good at, you can switch over into the new thing and have a more concrete motivation to learn it.<br /><br />(Or, you know, just stay in Python but dive into the deep end.  I&#39;m sure you can gain complete understanding of all current and possible programming languages by working on sufficiently deep internals in PyPy&#8230;)</div>
</div>
<div class='comment'>
<div class='author'>Unknown<span class='comment-date'> on 2012-06-25 13:19</span></div>
<div class='content'>
Deep-end. Push. Have a challenge or pet project to work on and others to keep you accountable to it. <br /><br />That said, I should probably eat my own dog food when it comes to that.</div>
</div>
<div class='comment'>
<div class='author'>chrome___<span class='comment-date'> on 2012-06-25 11:14</span></div>
<div class='content'>
Good question &#8211; I have the same problem. <br /><br />Things that helped me in the past (eg. learning Erlang) was the (probably) usual anti-procrastination stuff: *) set aside some fixed time *) set goals eg. &quot;I&#39;ll complete this-and-this prototype by tomorrow&quot;, *) tons of external pressure *) keep a journal to reflect on the cool stuff you&#39;ve learned<br /><br />I&#39;d be very interested what other people do&#8230;</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/06/unfiltered-reflections-on-my-first-juju.html">Unfiltered reflections on my first Juju charm</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-06-22T00:00:00+01:00" pubdate data-updated="true">2012-06-22 Friday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<br /><br /><div>I just finished up my first <a href="https://juju.ubuntu.com/">Juju</a> charm, designed to deploy the tiny and not-yet-useful <a href="https://launchpad.net/libdep-service/">libdep-service</a>, which is going to become a micro-service used by <a href="https://launchpad.net/pkgme-service">pkgme-service</a>, which exists to automatically package submissions by application developers to <a href="http://developer.ubuntu.com/">developer.ubuntu.com</a>.</div><div><br /></div><div>The charm works, insofar as it brings up a Django service that implements the API. It&#8217;s not really ready for others to use, as it doesn&#8217;t provide any interfaces and doesn&#8217;t make good use of Juju&#8217;s configuration system. </div><div><br /></div><div>It&#8217;s very early days for me as a Juju user. The notes below are largely about problems, but I&#8217;m actually fairly optimistic that having a charm for my service will be very useful. Two big benefits so far:</div><div><ol><li>There&#8217;s less code than in my equivalent fabric task for deploying to EC2</li><li>I can deploy to LXC on my laptop, which means a fast, clean, local, production-like environment</li></ol><div>Anyway, on with the notes.</div></div><ul><li><span style="background-color: white;">#juju is heaps better when America is awake</span></li><li><span style="background-color: white;">upgrading with apt requires a lot of options, but this is quite a standard</span><span style="background-color: white;">&nbsp;action</span></li><ul><li><span style="background-color: white;">e.g. <span style="font-family: 'Courier New', Courier, monospace;">sudo DEBIAN_FRONTEND=noninteractive apt-get dist-upgrade -q -y</span></span></li><li>You get this by default if you don&#8217;t use sudo, and you don&#8217;t have to use sudo</li></ul><li><span style="background-color: white;">so many <a href="https://bugs.launchpad.net/juju/+bug/955209">things that are just warnings are marked as<span style="font-family: 'Courier New', Courier, monospace;"> ERROR</span></a>, makes debugging&nbsp;</span><span style="background-color: white;">much harder</span></li><li><span style="background-color: white;">perhaps this is intrinsic, but there are almost always four to six errors&nbsp;</span><span style="background-color: white;">to be debugged at once</span></li><li><span style="background-color: white;">Don&#8217;t use lp: URLs to fetch branches because it generates warnings. Use http://code.launchpad.net/ instead.</span></li><li><span style="background-color: white;">Is there a way to have a local apt mirror or something to make iterating</span><span style="background-color: white;">&nbsp;faster? &nbsp;Is this what I&#8217;ve got already?</span></li><li><span style="background-color: white;">When translating from fabric <span style="font-family: 'Courier New', Courier, monospace;">run(&#8220;cd X &amp;&amp; Y&#8221;)</span>, remember that fabric&nbsp;</span><span style="background-color: white;">restores directory after <span style="font-family: 'Courier New', Courier, monospace;">run</span></span></li><ul><li><span style="background-color: white;"><span style="font-family: inherit;">Use </span><span style="font-family: 'Courier New', Courier, monospace;">(cd X &amp;&amp; Y)</span><span style="font-family: inherit;">&nbsp;in bash instead, runs in a subshell</span></span></li></ul><li><span style="background-color: white;"><b>ACTION:</b> Look up &#8216;man 8 apt-get&#8217; for &#8211;force-yes and why it&#8217;s bad</span></li><li><span style="background-color: white;">Long-ish iteration cycle (2-5 mins) makes it a bit slow going</span></li><ul><li><span style="background-color: white;">See also&nbsp;<a href="https://bugs.launchpad.net/juju/+bug/1015644">Users not told when deploy actually completes</a></span></li><li><span style="background-color: white;">Iterating with &#8216;deploy &#8211;upgrade&#8217;, watch &#8216;debug-log&#8217;, &#8216;destroy-service&#8217;,&nbsp;</span><span style="background-color: white;">(sometimes &#8216;bzr ci&#8217;; &#8216;bzr push&#8217;)</span></li></ul><ul><li><span style="background-color: white;"><b>ACTION:</b> Poke around more with &#8216;juju debug-log&#8217; (see also&nbsp;</span><a href="https://bugs.launchpad.net/juju/+bug/1016003">&#8220;juju debug-hooks -h&#8221; doesn&#8217;t say what &#8216;debug-hooks&#8217; does</a>)</li></ul><li><span style="background-color: white;">After delegating to puppet, if that fails, the&nbsp;<span style="font-family: 'Courier New', Courier, monospace;">install</span>&nbsp;hook doesn&#8217;t fail</span></li><li><span style="background-color: white;"><span style="background-color: white;">Ended up putting the puppet stuff should be in the charm to avoid having to commit &amp;</span><span style="background-color: white;">&nbsp;push the branch up</span></span></li><li><span style="background-color: white;">A little bit surprised that hooks run as root. &nbsp;I don&#8217;t have a credible&nbsp;</span><span style="background-color: white;">alternative to hand, but I thought that this was what we wanted to get away</span><span style="background-color: white;">&nbsp;from with .debs.</span></li><ul><li><span style="background-color: white;">How do I run things with less privilege</span></li></ul><li><span style="background-color: white;">I do server-side changes a fair bit to fix things. It&#8217;s easy to forget a&nbsp;</span><span style="background-color: white;">step when applying them back to the charm / manifest. No easy way of</span><span style="background-color: white;">&nbsp;checking either.</span></li><li><span style="background-color: white;">Bouncing on this command is heaps better:</span><span style="background-color: white;"><span style="font-family: 'Courier New', Courier, monospace;">juju deploy &#8211;repository=charms &#8211;upgrade \</span></span><span style="background-color: white; font-family: 'Courier New', Courier, monospace;">&nbsp; local:libdep-service &amp;&amp; jitsu watch libdep-service \<br />&nbsp; &nbsp; &#8211;state=started &#8211;num-units=1</span></li></ul><br /><br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/06/further-reflections-on-my-first-juju.html">Further reflections on my first Juju charm</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-06-22T00:00:00+01:00" pubdate data-updated="true">2012-06-22 Friday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Since I wrote the notes that appear in my previous post, I&#8217;ve had a chance to reflect further on my experience writing a Juju charm.<br /><span style="background-color: white;"><br /></span><br /><span style="background-color: white;">The thing is, even though the end result is very cool – I can just deploy this code as a new service whenever I want without having to think about it – the experience wasn&#8217;t great. I wasn&#8217;t having a fun time getting it to work. I think there are a few reasons for this.</span><br /><br /><span style="background-color: white;">First, I was on my own. I work from home and most days I sit down in my office and plug away at my laptop. I generally like it, but there are times when it&#8217;s not great. Most of the time I&#8217;m doing things I already know how to do: debugging strange production problems; deleting unnecessary Python code; encouraging people to get to the point in meetings and <a href="https://plus.google.com/115348217455779620753/posts/J8to9rW8Ef8">despairing over voice communication technologies</a>.</span><br /><span style="background-color: white;"><br /></span><br /><span style="background-color: white;">Juju is still a fairly new technology. The <a href="http://juju.ubuntu.com/docs/">published documentation</a> is still a bit raw, the website isn&#8217;t the easiest to navigate and the tools could do a better job at being self-documenting. It&#8217;s demotivating to want to do a thing, not know how to do it and not know how to find out how to do it. That&#8217;s one of the reasons I mentioned that #juju is a much better place when the US is awake: that&#8217;s when the experts are around. T</span><span style="background-color: white;">he Juju shamans know about these problems and are working now to the whole learning experience much better.</span><br /><br />Tangent: I&#8217;d very much encourage you to go to a <a href="https://juju.ubuntu.com/CharmSchool">Charm School</a> if you get the chance. The Juju guys are super-helpful, fun to be around, and the whole thing is much more pleasant when you&#8217;re with other people and not the only one asking dumb questions. I went to one, but I didn&#8217;t do the <a href="https://juju.ubuntu.com/CharmSchool#Necessary_Software">preparation</a>, and had a dodgy laptop, so I spent all of my time head-butting network issues rather than actually writing charms. <a href="https://juju.ubuntu.com/docs/getting-started.html#configuring-a-local-environment">Do the preparation</a>.<br /><br />Second, the core feedback loop wasn&#8217;t that great. I&#8217;m a bit spoiled. Most of the time, I run tests, they run very quickly, I get very nicely formatted results in colour, I fix the small, known number of failures, I run the tests, everything works and I get a visual sweetie from laptop. Automating the deploymment of pre-alpha software is not like that at all.<br /><br />The feedback loop is longish, about 2-5 minutes. By default, you have to sit watching the debug-log to tell when it&#8217;s done or when it hits a fatal error.&nbsp;<span style="background-color: white;">If you accidentally run an interactive command in your install hook, then deployment will stall.&nbsp;</span><span style="background-color: white;">You don&#8217;t get any notice of success or failure, and certainly nothing that you could integrate into your desktop (e.g. beep when done). Over two minutes is long enough for me to get distracted, but under five minutes is short enough that I won&#8217;t switch to any task that requires concentration. It doesn&#8217;t make for a pleasant day.</span><br /><span style="background-color: white;"><br /></span><br /><span style="background-color: white;">Oh, I should mention that I got stuck for a while at the very outset, redeploying the same version of my charm because I forgot to update the revision file and didn&#8217;t realize that I actually wanted to run deploy with the <span style="font-family: 'Courier New', Courier, monospace;">&#8211;upgrade</span> option.</span><br /><br /><span style="background-color: white;">When you do get errors, there are likely to be many of them, and they are messily strewn about the debug log in hard to find places, cluttered with useless stuff. This is largely not Juju&#8217;s fault: it&#8217;s the fault of the system tools that you have to call to get things set up. Juju&#8217;s debug-log does give an option to limit output to just &#8220;ERROR&#8221; level message, but that includes noise from things like GPG and Bazaar (which emit to stderr as part of normal behaviour, <a href="https://bugs.launchpad.net/juju/+bug/955209">which Juju interprets as ERROR</a>). It also doesn&#8217;t give you enough context to debug the real errors. There are also some <a href="https://bugs.launchpad.net/juju/+bug/1015655">formatting glitches</a>, and it doesn&#8217;t have colour.</span><br /><span style="background-color: white;"><br /></span><br />I mentioned these things about the feedback loop to a colleague. He rightly pointed out that I was speaking very much as a programmer, accustomed to bouncing on <span style="font-family: 'Courier New', Courier, monospace;">make check</span>. For a sysadmin, being able to redeploy on a fresh machine from scratch and see all the errors in one place in under five minutes is a huge improvement.<br /><br /><br /><span style="background-color: white;">Third, I have to pass on some of this knowledge to&nbsp;<i>my</i>&nbsp;users. Or at least, people who are contributing to my project ought to be able to quickly learn how to fire up the charm. At the moment, there are still a few too many ifs, buts, maybes and perhaps-try-thises that I&#8217;m <a href="http://paste.ubuntu.com/1054697/">compelled to include</a>. I&#8217;ll probably turn the documentation into a script at some point, as others seem to <a href="https://gist.github.com/2050525">have</a> <a href="https://gist.github.com/1406018">done</a>.</span><br /><span style="background-color: white;"><br /></span><br /><span style="background-color: white;">That&#8217;s it. It&#8217;s a <i>much </i>longer post than I expected. Sorry. I hope it helps some.</span><br /></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2012-06-25 10:27</span></div>
<div class='content'>
@clint-fewbar, thanks for the &#39;ccze&#39; tip. That&#39;s very useful, and not just for juju charming.<br /><br />@Kapil, thanks. I discovered replay and log level filtering pretty early on. The log level filtering was a bit annoying as -l ERROR didn&#39;t give me <i>all</i> the errors, included some non-errors, and didn&#39;t provide enough context for the errors that were included.<br /><br />I&#39;m not really sure what an agent is or how it matters.</div>
</div>
<div class='comment'>
<div class='author'>Kapil Thangavelu<span class='comment-date'> on 2012-06-23 01:40</span></div>
<div class='content'>
thanks for the feedback.<br /><br />just fwiw, juju debug-log has very fine grained options for exactly targeting what your interested in, you can listen in on a particular agent or group of agents,  exclude hook output, capture logs at a particular level, replay logs, etc.</div>
</div>
<div class='comment'>
<div class='author'>clint-fewbar<span class='comment-date'> on 2012-06-22 19:43</span></div>
<div class='content'>
Jono, thanks so much for spending time with juju, its really great to hear some fresh new thoughts (and to have a few old problems reiterated so we remember to address them.)<br /><br />For the feedback loop, I think the &#39;debug-hooks&#39; command is going to save you a lot of problems at least in terms of being able to run your hook over and over until its &quot;right&quot;. The problem is that unlike a test suite, we are changing the system state *on purpose* so iterating means getting back to the same starting state. I do think we need to make better use of LXC&#39;s ability to clone containers in the debug-hooks command, but network complexity becomes an issue, so we&#39;ll have to keep working on this.<br /><br />Also for colorized logs:<br /><br />juju debug-log | ccze -A<br /><br />The ccze tool&#39;s general rules will produce a pretty nicely highlighted log for you. The ERROR issue remains, but I think we&#39;ll solve that soon enough with the patch you submitted. :)</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/05/married.html">Married</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-05-28T00:00:00+01:00" pubdate data-updated="true">2012-05-28 Monday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;m back online after three weeks vacation. Purpose of said vacation was to get married and go on honeymoon. Only thing to say about that is: huge success. I&#8217;m very, very happy.<br /><br />While I&#8217;ve been gone, Ubuntu has had its developer summit and decreed that Ubuntu 12.10 will have only Python 3 on the CD. As such, a few people have&nbsp;done a bunch of work on the <a href="http://pypi.python.org/pypi/testtools">testtools</a> cluster (<a href="http://pypi.python.org/pypi/fixtures">fixtures</a>, <a href="http://pypi.python.org/pypi/testscenarios">testscenarios</a>, etc.), making them Python 3 compatible, or fixing compatibility bugs where they existed. It&#8217;s such a nice feeling to come back from vacation and taste the delicious fruits of other&#8217;s labour. Well done all!<br /><br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/03/local-juju.html">Local Juju</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-03-02T00:00:00+00:00" pubdate data-updated="true">2012-03-02 Friday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I have a bit of a fetish for being able to hack offline. It&#8217;s becoming increasingly old-fashioned, I know, but I&#8217;d like to think that eventually it will become a quirky and charming eccentricity, such as one might find in a British amateur sleuth.<br /><br />I wanted to get up and running with <a href="https://juju.ubuntu.com/">Juju</a>, <a href="http://www.canonical.com/">Canonical</a>&#8217;s funky cloud orchestration thingy. We&#8217;re doing a lot more service-oriented stuff in recent months, and it&#8217;s very handy to be to just deploy something without having to faff about for a couple of hours. Since I&#8217;d like to stand a chance of doing this without a net connection, I set it up locally.<br /><br />With the help of the <a href="https://juju.ubuntu.com/CharmSchool">Charm School</a> page, the <a href="https://juju.ubuntu.com/docs/provider-configuration-local.html">local provider docs</a> and the kind folk at #juju on Freenode, I got something up and running. Some notes about the experience:<br /><ul><li>I did all of this in precise, and it seemed to work just fine. I substituted &#8216;precise&#8217; for &#8216;oneiric&#8217; wherever I saw it.</li><li>I had to manually add my user to the <code>libvirtd</code> group. The instructions implied that this was not necessary.</li><li><code>juju bootstrap</code> finished very quickly for me and without any actual evidence that it had debootstrapped the whole OS.</li><li>When I deployed services, I didn&#8217;t get any feedback that anything was going on. The recommended <code>debug-log</code> command showed very little output for a while. My guess is that this was while packages were downloading.</li></ul><div>All in all, pretty impressive. I&#8217;m really looking forward to mucking around with this a bit more</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/02/bad-snake-joke.html">Bad Snake Joke</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-02-25T00:00:00+00:00" pubdate data-updated="true">2012-02-25 Saturday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Just between you and me, I&#8217;m getting a bit bored of writing Python all the time. It&#8217;s a good language: I can write code that&#8217;s functional or OO as the case may be; it has lots of libraries; it has <a href="http://twistedmatrix.com/">Twisted</a>, which is incredibly useful; it&#8217;s not <i>too</i>&nbsp;hard to make <a href="https://code.launchpad.net/+branch/launchpad">a big project</a> and keep it clean. It&#8217;s the least awful programming language that I know of. That said, I&#8217;d like to do something different.<br /><br />I would like to play with something makes static typing rock (like Haskell), or that has what <a href="http://www.infoq.com/presentations/Simple-Made-Easy">Rich Hickey calls</a> &#8220;polymorphism a la carte&#8221; (again, like <a href="http://book.realworldhaskell.org/read/using-typeclasses.html">Haskell</a>, or <a href="http://clojure.org/Protocols">Clojure</a>). I would like to make something that stands a chance of feeling snappy (perhaps <a href="http://pypy.org/">PyPy</a>?), a chance to use something with richer debugging and refactoring tools, or to get a feel for doing some serious concurrency work outside of an event loop.<br /><br />But mainly, I&#8217;m just bored of Python.<br /><br />Also, I increasingly suspect that Python <a href="http://www.biblegateway.com/passage/?search=gen%203:14&amp;version=NIV">doesn&#8217;t have legs</a>. The Python 3 language change has increased the split between the core developer community and people writing code in the field. Python continues to be slow, both with start-up time and while running. The only people who seem to care are the <a href="http://speed.pypy.org/">PyPy</a> developers, but I doubt I&#8217;ll ever get to use it for commercial development. It&#8217;s tricky to write code in Python that takes advantage of multiple cores, and even my phone has multiple cores now.<br /><br />When I get the chance, I&#8217;m going to do more with Haskell and Clojure in my spare time. I&#8217;m not sure if there is something less &#8220;fringe&#8221; that I could recommend for use at Canonical. <a href="http://golang.org/">Go</a> is a possibility, if a slightly disappointing one (interfaces are cool, but why oh why didn&#8217;t they do typeclasses?).</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>John Nilsson<span class='comment-date'> on 2012-06-25 23:26</span></div>
<div class='content'>
I was mainly thinking of how the scala implicits implementention give you somewhat more control over type class instances.<br /><br />But in general, being an OOP/FP hybrid it gives you some tools form the OOP end of things that provides some extra options.<br /><br />Full H-M type inference had to be sacrificed to get OOP though, but the inference is still pretty good.</div>
</div>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2012-06-25 10:22</span></div>
<div class='content'>
+John, thanks, will give it a try. I have to say that of the &quot;new&quot; JVM languages, I&#39;m more tempted by Clojure. Can you explain a little how it&#39;s type system could be considered better than Haskell&#39;s in some respects?</div>
</div>
<div class='comment'>
<div class='author'>John Nilsson<span class='comment-date'> on 2012-06-24 11:16</span></div>
<div class='content'>
You should give Scala a try. Its type system rocks (in some ways even beats haskell), has a type class mechanism (which should give you polymorphism a la carte) and compiles to Java (so is quite snappy). But most importantly its fun.</div>
</div>
<div class='comment'>
<div class='author'>AmanicA<span class='comment-date'> on 2012-02-28 10:12</span></div>
<div class='content'>
lol. good post :)</div>
</div>
<div class='comment'>
<div class='author'>jml<span class='comment-date'> on 2012-02-26 16:28</span></div>
<div class='content'>
@Tom, I&#39;ll take a look at Racket.  When I last looked at PLT Scheme, my main take-away was disappointment in its module system.<br /><br />@glyph, it&#39;s <i>kind</i> of a good thing. It&#39;s arguably a great thing for the end users of my work. If the way out of Python&#39;s boredom is to run through some other language&#39;s minefield, then, umm, yeah, no thanks. However, I&#39;m not convinced that every other language will necessarily be more dangerous/frustrating/slippery/difficult.<br /><br />As for going further up the stack, it&#39;s definitely an option, but not one that immediately appeals.<br /><br />@Daniel, I haven&#39;t tried Vala. Does it do much beyond Java / C#?<br /><br />@ddaa, I&#39;m glad I&#39;m not the only one! That I&#39;m bored after twelve or so years rather than, say, consumed by loathing, is a good sign.  I look forward to hearing more about your project.</div>
</div>
<div class='comment'>
<div class='author'>ddaa<span class='comment-date'> on 2012-02-26 15:03</span></div>
<div class='content'>
That is how I feel about Python at the moment too. As Glyph says, that probably tells something good about the language&#8230;<br /><br />Clojure and Go are the two &quot;next&quot; languages I have in mind too. I will posting something on g+ about a project I have been contemplating for a while.</div>
</div>
<div class='comment'>
<div class='author'>Daniel Bo<span class='comment-date'> on 2012-02-26 03:14</span></div>
<div class='content'>
Learning new things is great and no one should get themselves in a rut.<br /><br />Have you tried Vala? GObject introspection in a C3/Java-like language that pre-compiles to C. It hits that start-up time problem you mentioned. Vala also has a sister language called Genie, which is much more Python-like and which uses the same libraries and compiler. You may want to start there.</div>
</div>
<div class='comment'>
<div class='author'>glyph<span class='comment-date'> on 2012-02-26 01:02</span></div>
<div class='content'>
I humbly submit that being bored with the language is kind of a good thing.  Maybe you should be looking further up the stack for some excitement?  Do something with PyGame, maybe?  Or learn something about bioinformatics and mess around with BioPython?<br /><br />To put it a different way: when I was doing C++, I felt a range of emotions about the language and my tools for dealing with it, but &quot;boredom&quot; was not one of them.<br /><br />(That said, Twisted <i>really</i> needs to make it easier to utilize multiple cores.)</div>
</div>
<div class='comment'>
<div class='author'>Tom Berger<span class='comment-date'> on 2012-02-25 15:09</span></div>
<div class='content'>
If you&#39;re thinking of revisiting lisp, I urge you to take a look at Racket, the latest incarnation of PLT Scheme. Racket gives you the opportunity to work with pretty much all the best tools and paradigms modern programming languages can offer (dynamic typing, static typing, functional, OO, declarative), it is reasonably performant (optimizing JIT compiler, optional type declarations) and though not as hype as Clojure, it has a small but active and very mature community.<br /><br />Go is great, but I&#39;m finding it hard to give up the dynamism, especially interaction.</div>
</div>
<div class='comment'>
<div class='author'>Tom Berger<span class='comment-date'> on 2012-02-25 15:07</span></div>
<div class='content'>
This comment has been removed by the author.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/02/testtools-0914-released.html">testtools 0.9.14 released</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-02-16T00:00:00+00:00" pubdate data-updated="true">2012-02-16 Thursday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a href="http://pypi.python.org/pypi/testtools">testtools</a>&#8217;s sister project, <a href="https://launchpad.net/subunit">subunit</a>,&nbsp;was using a&nbsp;private API that we deleted in the 0.9.13 release. &nbsp;This release restores&nbsp;that API in order to smooth out the upgrade path.<br /><br />If you don&#8217;t use subunit, then this release won&#8217;t matter very much to you.<br /><div><br /></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/02/testtools-0913-released.html">testtools 0.9.13 released</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-02-06T00:00:00+00:00" pubdate data-updated="true">2012-02-06 Monday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
It has been a while, but <a href="http://pypi.python.org/pypi/testtools">testtools 0.9.13</a> is finally out!&nbsp;Lots more matchers and bug fixes, as well as improved error reporting. Full release notes <a href="https://launchpad.net/testtools/0.9/0.9.13">on Launchpad</a>.<br /><br />Thanks to <a href="http://jameswestby.net/weblog">James Westby</a>, <a href="http://grahambinns.com/">Graham Binns</a>, <a href="https://launchpad.net/~frankban">Francesco Banconi</a> and <a href="http://rbtcollins.wordpress.com/">Robert Collins</a> for making this release possible.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/2012/02/simple-made-easy.html">Simple made easy</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-02-01T00:00:00+00:00" pubdate data-updated="true">2012-02-01 Wednesday</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Rich Hickey did a great talk at Strange Loop called &#8221;<a href="http://www.infoq.com/presentations/Simple-Made-Easy">Simple Made Easy</a>&#8221;. You should watch it.<br /><br />When I tried to explain the talk to someone, I stumbled a lot and it was obvious to me that I didn&#8217;t really understand it. So I&#8217;m going through it again and turning it into a blog post, purely for my own gain.<br /><br />This is roughly the first half of the talk. Not much of my own analysis or opinion is inserted, and I&#8217;ve pretty much stuck with Hickey&#8217;s illustrations and phrasings. Thus this post is pretty derivative. Oops.<br /><br /><b>Simple vs Easy</b><br /><br />&#8220;Simple&#8221; means one thing, &#8220;easy&#8221; another. Simple is the opposite of complex. A thing is simple if it has no interleaving, if it has one purpose, one concept, one dimension, one task. Being simple does not imply one instance or one operation: it&#8217;s about interleaving, not cardinality. Importantly, this means that simplicity is <i>objective</i>.<br /><br />Easy is the opposite of hard, or difficult. A thing is easy if it&#8217;s near to hand, if it&#8217;s easy to get at (location), if it&#8217;s near to our understanding (familiarity) or skill set or if it&#8217;s within our capabilities. This means that ease is<i> relative</i>.<br /><br />Speaking English is dead easy for me, but that doesn&#8217;t mean that speaking English is intrinsically simple. I find French quite difficult. Little French children speak French all the time, and there&#8217;s always a part of me that thinks, &#8220;Boy, those kids are clever, being able to speak a foreign language at that age&#8221;, but that&#8217;s silly. It&#8217;s easy for them, it lies near to them.<br /><br />This distinction between simple &amp; easy is good one, and is useful in all sorts of areas. But how does it relate to software?<br /><br /><b>Constructs vs Artefacts</b><br /><br />As programmers, when we make software we are working on <i>constructs</i>: source code, libraries, language concepts and so forth. Rich contends that we focus on the ease of use of those constructs: How many lines of code? How much boilerplate? Will new developers be familiar with our technology?<br /><br />But all of this is secondary. What actually matters is the <i>artefact</i>, the running programs that users actually use. Does it do what it&#8217;s supposed to do? Does it do it well? Can we rely on it working well? Can we fix problems when they occur? Can we change it? You know, the interesting problems.<br /><br />Thus we need to be assessing our constructs – our code, our technology choices – based on the attributes of the artefacts that we&#8217;ll create, not based on the experience of typing code in.<br /><br /><b>Limits</b><br /><br />We can&#8217;t make something reliable if we don&#8217;t understand it. And, actually, everyone&#8217;s understanding is pretty limited. We can all only hold a small number of things in our head at once.<br /><br />When things are complex, many parts are tied together by definition. You can&#8217;t pull out just one piece and consider it because it&#8217;s intertwined with other pieces. This creates an extra burden to understanding a system and thus makes it difficult to reason about the system.<br /><br />You do need to reason about a system, both to know what to change and to be able to do so without introducing defects. Tests, refactoring, rapid deployment and all that are great, but to make a change to the system safely &amp; without fear still requires you to be able to reason about it. Every bug in your product that was found in the field passed the type checker and passed all of the tests. &nbsp;Your type system doesn&#8217;t tell you what change to make next in order to get the software you want any more than guard rails on a highway tell you how to get to Grandma&#8217;s.<br /><br /><b>Speed</b><br /><br />Focusing on ease and ignoring simplicity means that you&#8217;ll go really fast in the beginning, but will become slower and slower as the complexity builds.<br /><br />Focusing on simplicity will mean that you&#8217;ll go slower in the beginning, because you&#8217;ll have to do some work to simplify the problem space, but making sure that you only have intrinsic complexity means that your rate of development will remain at a high constant.<br /><br />There are no actual numbers for this.<br /><br /><b>Complicating constructs</b><br /><br />Many complicating constructs are available, familiar, succinctly described and easy to use. But none of that matters to end users. What matters is the complexity they yield. This complexity is <i>incidental</i>, it&#8217;s not intrinsic to the problem.<br /><br />If we build things simply, then the resulting system is easier to debug, easier to change and easier to understand.<br /><br />Compare a knitted castle to a castle made of Lego. The knitted castle might have been great fun to make, and might have been really easy if knitted using a loom and cutting edge knitting tools, but there&#8217;s no way that it&#8217;s easier to change than a Lego castle. It&#8217;s not about the <i>ease of construction</i>, it&#8217;s about the <i>simplicity of the artefact</i>.<br /><br /><b>How can we make software easier?</b><br /><br />Well, we can install it to make it easier by location. We can learn it and try it to make it easier by familiarity. We can&#8217;t do much about our capabilities though. If we want software to be easier to comprehend, we are going to have to bring it down to our level. We have to make it simpler.<br /><br /><br />Take Lisp as an example. It&#8217;s hard for many people because they don&#8217;t have a Lisp installed, or their editor doesn&#8217;t support paren matching, but they can make it easier by installing a Lisp and getting a plugin for their editor. It&#8217;s also hard because it&#8217;s unfamiliar. Who&#8217;d have thought that parens could go on that side of the function? But you can gain that familiarity quickly enough.<br /><br />But parens in Lisp are used for functions and for grouping data. That&#8217;s hard to get your head around, and that&#8217;s because it&#8217;s complex. It braids together two distinct notions.</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/04/deliberately-being-naughty.html">Deliberately being naughty</a>
      </li>
    
      <li class="post">
        <a href="/2013/02/testtools-moved-to-github.html">testtools moved to Github</a>
      </li>
    
      <li class="post">
        <a href="/2013/02/are-single-variable-names-evil.html">Are single letter variable names evil?</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/getting-set-up-with-twisted-development.html">Getting set up with Twisted development</a>
      </li>
    
      <li class="post">
        <a href="/2012/11/whats-wrong-with-orms.html">What&#8217;s wrong with ORMs</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/jml">@jml</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jml',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/jonathan.lange?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Jonathan Lange -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
